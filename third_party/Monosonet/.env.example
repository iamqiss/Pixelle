# =============================================================================
# SONET MONOREPO - UNIFIED ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains all environment variables for the entire Sonet ecosystem
# Copy this to .env and fill in your values
# =============================================================================

# =============================================================================
# GLOBAL CONFIGURATION
# =============================================================================
NODE_ENV=development
ENVIRONMENT=development
APP_VERSION=1.0.0
BUILD_DATE=20250101
COMMIT_HASH=dev

# =============================================================================
# CLIENT CONFIGURATION (sonet-client/)
# =============================================================================

# Expo Public Variables (Client-side accessible)
EXPO_PUBLIC_ENV=development
EXPO_PUBLIC_RELEASE_VERSION=1.0.0
EXPO_PUBLIC_BUNDLE_IDENTIFIER=dev
EXPO_PUBLIC_BUNDLE_DATE=20250101
EXPO_PUBLIC_LOG_LEVEL=info
EXPO_PUBLIC_LOG_DEBUG=

# Sonet API Configuration
EXPO_PUBLIC_SONET_API_BASE=http://localhost:8080/api
EXPO_PUBLIC_SONET_WS_BASE=ws://localhost:8080
EXPO_PUBLIC_SONET_CDN_BASE=http://localhost:8080/cdn

# External Services
EXPO_PUBLIC_SENTRY_DSN=
EXPO_PUBLIC_BITDRIFT_API_KEY=
EXPO_PUBLIC_GCP_PROJECT_ID=0

# Feature Flags
EXPO_PUBLIC_USE_SONET_MESSAGING=true
EXPO_PUBLIC_USE_SONET_E2E_ENCRYPTION=true
EXPO_PUBLIC_USE_SONET_REALTIME=true
EXPO_PUBLIC_USE_SONET_ANALYTICS=true
EXPO_PUBLIC_USE_SONET_MODERATION=true

# =============================================================================
# GATEWAY CONFIGURATION (gateway/)
# =============================================================================

# Server Configuration
GATEWAY_PORT=8080
GATEWAY_HOST=0.0.0.0
GATEWAY_CORS_ORIGIN=http://localhost:3000,http://localhost:19006

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# File Upload
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,video/mp4,video/webm

# =============================================================================
# DATABASE CONFIGURATION (sonet/)
# =============================================================================

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=sonet
POSTGRES_PASSWORD=sonet_dev_password
POSTGRES_DB=sonet_dev
POSTGRES_SSL_MODE=disable

# Database URLs for Services
DATABASE_URL_USER_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/user_service
DATABASE_URL_NOTE_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/note_service
DATABASE_URL_MEDIA_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/media_service
DATABASE_URL_FOLLOW_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/follow_service
DATABASE_URL_NOTIFICATION_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/notification_service
DATABASE_URL_MESSAGING_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/messaging_service
DATABASE_URL_TIMELINE_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/timeline_service
DATABASE_URL_SEARCH_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/search_service
DATABASE_URL_ANALYTICS_SERVICE=postgresql://sonet:sonet_dev_password@localhost:5432/analytics_service

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379

# =============================================================================
# MICROSERVICES CONFIGURATION (sonet/)
# =============================================================================

# User Service
USER_SERVICE_PORT=8081
USER_SERVICE_GRPC_PORT=9090
USER_SERVICE_LOG_LEVEL=debug

# Note Service
NOTE_SERVICE_PORT=8082
NOTE_SERVICE_GRPC_PORT=9091
NOTE_SERVICE_LOG_LEVEL=debug

# Media Service
MEDIA_SERVICE_PORT=8083
MEDIA_SERVICE_GRPC_PORT=9092
MEDIA_SERVICE_LOG_LEVEL=debug
MEDIA_SERVICE_STORAGE_PATH=/app/media
MEDIA_SERVICE_CDN_URL=http://localhost:8080/cdn

# Follow Service
FOLLOW_SERVICE_PORT=8084
FOLLOW_SERVICE_GRPC_PORT=9093
FOLLOW_SERVICE_LOG_LEVEL=debug

# Notification Service
NOTIFICATION_SERVICE_PORT=8085
NOTIFICATION_SERVICE_GRPC_PORT=9094
NOTIFICATION_SERVICE_LOG_LEVEL=debug

# Messaging Service
MESSAGING_SERVICE_PORT=8086
MESSAGING_SERVICE_GRPC_PORT=9095
MESSAGING_SERVICE_LOG_LEVEL=debug

# Timeline Service
TIMELINE_SERVICE_PORT=8087
TIMELINE_SERVICE_GRPC_PORT=50051
TIMELINE_SERVICE_LOG_LEVEL=debug

# Search Service
SEARCH_SERVICE_PORT=8088
SEARCH_SERVICE_GRPC_PORT=9096
SEARCH_SERVICE_LOG_LEVEL=debug
SEARCH_SERVICE_ELASTICSEARCH_URL=http://localhost:9200

# Analytics Service
ANALYTICS_SERVICE_PORT=8089
ANALYTICS_SERVICE_GRPC_PORT=9097
ANALYTICS_SERVICE_LOG_LEVEL=debug

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Email Service (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@sonet.app

# Push Notifications
FIREBASE_PROJECT_ID=your-firebase-project
FIREBASE_PRIVATE_KEY_ID=your-private-key-id
FIREBASE_PRIVATE_KEY=your-private-key
FIREBASE_CLIENT_EMAIL=your-client-email
FIREBASE_CLIENT_ID=your-client-id

# CDN Configuration
CDN_PROVIDER=local
CDN_BASE_URL=http://localhost:8080/cdn
CDN_REGION=us-east-1
CDN_ACCESS_KEY_ID=
CDN_SECRET_ACCESS_KEY=
CDN_BUCKET_NAME=sonet-media

# Monitoring & Analytics
SENTRY_DSN=
SENTRY_ORG=sonet
SENTRY_PROJECT=sonet-app
SENTRY_AUTH_TOKEN=

# Logging
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_DESTINATION=console

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Encryption
ENCRYPTION_ALGORITHM=AES-256-GCM
ENCRYPTION_KEY_SIZE=32
ENCRYPTION_IV_SIZE=12

# Content Moderation
MODERATION_API_KEY=
MODERATION_ENDPOINT=
MODERATION_THRESHOLD=0.8

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Tools
DEBUG=sonet:*
NODE_ENV=development
LOG_LEVEL=debug

# Hot Reload
WATCH_MODE=true
AUTO_RESTART=true

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test Database
TEST_DATABASE_URL=postgresql://sonet:sonet_test_password@localhost:5433/sonet_test
TEST_REDIS_URL=redis://localhost:6380

# Test Configuration
TEST_TIMEOUT=10000
TEST_RETRIES=3
COVERAGE_ENABLED=true

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and modify these for production deployments

# PRODUCTION_DATABASE_URL=postgresql://sonet:${DB_PASSWORD}@${DB_HOST}:5432/sonet_prod
# PRODUCTION_REDIS_URL=redis://${REDIS_HOST}:6379
# PRODUCTION_JWT_SECRET=${JWT_SECRET}
# PRODUCTION_SENTRY_DSN=${SENTRY_DSN}
# PRODUCTION_CDN_BASE_URL=https://cdn.sonet.app
# PRODUCTION_SONET_API_BASE=https://api.sonet.app
# PRODUCTION_SONET_WS_BASE=wss://api.sonet.app